(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e76697e"],{"3a56":function(e,t,n){},"446b":function(e,t,n){},"4ea9":function(e,t,n){"use strict";n("3a56")},5666:function(e,t,n){"use strict";n.r(t);var o=n("7a23");function c(e,t,n,c,a,i){var l=Object(o["resolveComponent"])("MyClient"),r=Object(o["resolveComponent"])("AdminFrame");return Object(o["openBlock"])(),Object(o["createBlock"])(r,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l)]})),_:1})}var a=function(e){return Object(o["pushScopeId"])("data-v-c915bc5e"),e=e(),Object(o["popScopeId"])(),e},i={class:"settings-index-page"},l=a((function(){return Object(o["createElementVNode"])("h1",null,"应用程序",-1)}));function r(e,t,n,c,a,r){var d=Object(o["resolveComponent"])("MyToolbar"),u=Object(o["resolveComponent"])("MySearch"),s=Object(o["resolveComponent"])("MyPager"),b=Object(o["resolveComponent"])("MyTable"),p=Object(o["resolveComponent"])("MyEdit");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[l,Object(o["createVNode"])(d,{onAction:r.handleAction},null,8,["onAction"]),Object(o["createVNode"])(u,{class:"search-box"}),Object(o["createVNode"])(s,{class:"pager-box"}),Object(o["createVNode"])(b,{onAction:r.handleAction},null,8,["onAction"]),Object(o["createVNode"])(p,{method:"POST",enabled:a.theAddEnabled,"onUpdate:enabled":t[0]||(t[0]=function(e){return a.theAddEnabled=e}),item:a.theAddItem,"onUpdate:item":t[1]||(t[1]=function(e){return a.theAddItem=e})},null,8,["enabled","item"]),Object(o["createVNode"])(p,{method:"PUT",enabled:a.theEditEnabled,"onUpdate:enabled":t[2]||(t[2]=function(e){return a.theEditEnabled=e}),item:a.theEditItem,"onUpdate:item":t[3]||(t[3]=function(e){return a.theEditItem=e})},null,8,["enabled","item"])])}n("b0c0");var d=["src"],u={class:"operation-buttons"};function s(e,t,n,c,a,i){var l=Object(o["resolveComponent"])("el-table-column"),r=Object(o["resolveComponent"])("el-button"),s=Object(o["resolveComponent"])("el-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(s,{data:i.items},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"",width:"48px"},{default:Object(o["withCtx"])((function(e){return[Object(o["createElementVNode"])("img",{class:"item-icon-img",src:e.row.icon},null,8,d)]})),_:1}),Object(o["createVNode"])(l,{label:"名称",prop:"name"}),Object(o["createVNode"])(l,{label:"标题",prop:"title"}),Object(o["createVNode"])(l,{label:"状态",prop:"state"}),Object(o["createVNode"])(l,{label:"操作"},{default:Object(o["withCtx"])((function(e){return[Object(o["createElementVNode"])("div",u,[Object(o["createVNode"])(r,{type:"primary",link:"",onClick:function(t){return i.handleClickItemDetail(e.row)}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("详情")]})),_:2},1032,["onClick"]),Object(o["createVNode"])(r,{type:"primary",link:"",onClick:function(t){return i.handleClickEditItem(e.row)}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("编辑")]})),_:2},1032,["onClick"]),Object(o["createVNode"])(r,{type:"danger",link:"",onClick:function(t){return i.handleClickRemoveItem(e.row)}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("移除")]})),_:2},1032,["onClick"])])]})),_:1})]})),_:1},8,["data"])])}var b=n("c9a1"),p={name:"settings-executables-table",computed:{items:function(){return this.$store.getters["executable/currentPageItems"]}},methods:{handleClickRemoveItem:function(e){var t=this,n="移除应用程序",o="确定要移除 ["+e.name+"] 这个应用程序吗？",c="该操作不会把磁盘上安装的程序卸载或删除，仅将对它的引用从WPM数据库中移除。";b["a"].confirm(o+c,n,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.removeItem(e)})).catch((function(){}))},handleClickEditItem:function(e){var t="edit",n={name:t,item:e};this.$emit("action",n)},handleClickItemDetail:function(e){var t="detail",n={name:t,item:e};this.$emit("action",n)},removeItem:function(e){var t=e.id;this.$store.dispatch("executable/remove",t)}}},h=(n("7a4e"),n("6b0d")),m=n.n(h);const f=m()(p,[["render",s],["__scopeId","data-v-58bab15c"]]);var O=f;function j(e,t,n,c,a,i){var l=Object(o["resolveComponent"])("el-pagination");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(l,{"current-page":a.currentPage,"onUpdate:currentPage":t[0]||(t[0]=function(e){return a.currentPage=e}),"page-size":a.pageSize,"onUpdate:pageSize":t[1]||(t[1]=function(e){return a.pageSize=e}),"page-sizes":[5,10,20,50,100,200,500],background:a.background,layout:"total, sizes, prev, pager, next",total:i.theCountItemsTotal,onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["current-page","page-size","background","total","onSizeChange","onCurrentChange"])])}var C={name:"settings-executables-pager",computed:{items:function(){return[]},theCountItemsTotal:function(){return this.$store.getters["executable/total"]}},data:function(){return{currentPage:1,pageSize:10,background:!1}},methods:{handleSizeChange:function(e){var t=e;this.$store.commit("executable/update",{size:t})},handleCurrentChange:function(e){var t=e-1;this.$store.commit("executable/update",{index:t})},init:function(){var e={index:this.currentPage-1,size:this.pageSize,filter:""};this.$store.commit("executable/update",e)}},mounted:function(){this.init()}};const v=m()(C,[["render",j]]);var V=v,g=n("f6f2"),x={name:"settings-executables-table",computed:{},data:function(){return{searchtext:""}},methods:{applyFilter:function(e){this.searchtext=e,this.$store.commit("executable/update",{filter:e})}}},k=Object.assign(x,{setup:function(e){return function(e,t){var n=Object(o["resolveComponent"])("el-icon"),c=Object(o["resolveComponent"])("el-button"),a=Object(o["resolveComponent"])("el-input");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(a,{modelValue:e.searchtext,onInput:e.applyFilter,clearable:"",placeholder:"请输入要查找的内容"},{append:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{title:"查找"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(n,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Object(o["unref"])(g["m"]))]})),_:1})]})),_:1})]})),_:1},8,["modelValue","onInput"])])}}});const N=k;var w=N,y={class:"toolbar"},_={name:"settings-local-repositories-toolbar",data:function(){return{}},methods:{fetch:function(){this.$store.dispatch("executable/fetch",{})},handleClickAdd:function(){var e={name:"add"};this.$emit("action",e)},handleClickRefresh:function(){this.fetch()}},mounted:function(){this.fetch()}},E=Object.assign(_,{setup:function(e){return function(e,t){var n=Object(o["resolveComponent"])("el-icon"),c=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",y,[Object(o["createVNode"])(c,{onClick:e.handleClickRefresh,title:"刷新"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(n,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Object(o["unref"])(g["k"]))]})),_:1})]})),_:1},8,["onClick"]),Object(o["createVNode"])(c,{onClick:e.handleClickAdd,title:"添加本地仓库"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(n,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Object(o["unref"])(g["j"]))]})),_:1})]})),_:1},8,["onClick"])])}}});n("d713");const B=m()(E,[["__scopeId","data-v-1d69e6dd"]]);var I=B,T=(n("a4d3"),n("e01a"),{class:"tip-bad-path"});function A(e,t,n,c,a,i){var l=Object(o["resolveComponent"])("el-button"),r=Object(o["resolveComponent"])("el-input"),d=Object(o["resolveComponent"])("el-form-item"),u=Object(o["resolveComponent"])("OpenWithPrioritySel"),s=Object(o["resolveComponent"])("el-form"),b=Object(o["resolveComponent"])("el-dialog"),p=Object(o["resolveComponent"])("OpenFileDialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(b,{modelValue:a.displayDialog,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.displayDialog=e}),title:i.theDialogTitle},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{"label-width":"150px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{label:"路径"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(r,{modelValue:a.item1.path,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.item1.path=e})},{append:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{onClick:i.handleClickBrowse},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" 浏览... ")]})),_:1},8,["onClick"])]})),_:1},8,["modelValue"]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",T," 错误的路径！ ",512),[[o["vShow"],a.displayTipForBadPath]])]})),_:1}),Object(o["createVNode"])(d,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(r,{modelValue:a.item1.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.item1.name=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(d,{label:"标题"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(r,{modelValue:a.item1.title,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.item1.title=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(d,{label:"排列顺序"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:a.item1.open_with_priority,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.item1.open_with_priority=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(d,{label:"说明"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(r,{type:"textarea",modelValue:a.item1.description,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.item1.description=e})},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(l,{type:"success",onClick:i.handleClickOK},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("保存")]})),_:1},8,["onClick"]),Object(o["createVNode"])(l,{type:"default",onClick:i.handleClickCancel},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("取消")]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue","title"]),Object(o["createVNode"])(p,{modelValue:a.displayOpenFileDialog,"onUpdate:modelValue":t[6]||(t[6]=function(e){return a.displayOpenFileDialog=e}),onOpenFile:i.handleOpenExeFiles},null,8,["modelValue","onOpenFile"])])}function F(e,t,n,c,a,i){var l=Object(o["resolveComponent"])("el-option"),r=Object(o["resolveComponent"])("el-select");return Object(o["openBlock"])(),Object(o["createBlock"])(r,null,{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.options,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:e.id,value:e.value,label:e.text},null,8,["value","label"])})),128)),Object(o["createVNode"])(l,{value:0,label:"不使用"})]})),_:1})}var P={name:"open-with-priority-selector",data:function(){for(var e=6,t=[],n=1;n<=e;n++){var o={id:n,value:e+2-n,text:""+n};t.push(o)}return{options:t}}};const S=m()(P,[["render",F]]);var D=S,M=n("2af2"),U={name:"settings-executables-item-add",components:{OpenWithPrioritySel:D,OpenFileDialog:M["a"]},computed:{isModeAdd:function(){var e=(this.method+"").toUpperCase();return"POST"==e},isModeEdit:function(){var e=(this.method+"").toUpperCase();return"PUT"==e},theDialogTitle:function(){return this.isModeAdd?"添加应用":"修改应用"}},data:function(){return{item1:{id:0,name:"",title:"",path:"",description:""},displayDialog:!1,displayTipForBadPath:!1,displayOpenFileDialog:!1}},methods:{handleClickCancel:function(){this.displayDialog=!1},handleClickOK:function(){var e=this,t=this.item1,n="executable/";this.isModeAdd?n+="insert":this.isModeEdit&&(n+="update"),this.$store.dispatch(n,t).then((function(){e.displayDialog=!1}))},handleClickBrowse:function(){this.displayOpenFileDialog=!0},handleOpenExeFiles:function(e){var t=this;if(null!=e){var n=null;for(var o in e){var c=e[o];n=c.path;break}if(null!=n){var a=this.item1;a.path=n,this.$store.dispatch("executable/prepareInsert",a).then((function(e){t.handleFindResult(e.data)}))}}},handleFindResult:function(e){var t=e.executables,n=t[0];if(n.ready&&n.size>0&&""!=n.sha256sum)return this.item1.name=n.name,this.item1.title=n.title,this.item1.path=n.path,void(this.displayTipForBadPath=!1);this.displayTipForBadPath=!0}},mounted:function(){},props:{enabled:Boolean,item:Object,method:String},watch:{displayDialog:function(e){this.$emit("update:enabled",e)},enabled:function(e){this.displayDialog=e},item:function(e){this.item1=e}}};n("4ea9");const z=m()(U,[["render",A],["__scopeId","data-v-b3d6cae2"]]);var $=z,R={name:"settings-executables",components:{MyTable:O,MyPager:V,MySearch:w,MyToolbar:I,MyEdit:$},data:function(){return{theAddItem:{},theAddEnabled:!1,theEditItem:{},theEditEnabled:!1}},methods:{handleAction:function(e){var t=e.name;"edit"==t?this.edit(e.item):"add"==t&&this.add()},add:function(){this.theAddItem={},this.theAddEnabled=!0},edit:function(e){this.theEditItem=e,this.theEditEnabled=!0}}};n("cc85");const W=m()(R,[["render",r],["__scopeId","data-v-c915bc5e"]]);var J=W,K={name:"settings-executables",components:{MyClient:J}};const L=m()(K,[["render",c]]);t["default"]=L},"7a4e":function(e,t,n){"use strict";n("8aa2")},"7d2b":function(e,t,n){},"8aa2":function(e,t,n){},cc85:function(e,t,n){"use strict";n("7d2b")},d713:function(e,t,n){"use strict";n("446b")}}]);
//# sourceMappingURL=chunk-0e76697e.ca8a82f4.js.map