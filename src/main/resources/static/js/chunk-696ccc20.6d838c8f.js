(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-696ccc20"],{"446b":function(e,t,n){},5666:function(e,t,n){"use strict";n.r(t);var c=n("7a23");function o(e,t,n,o,a,i){var l=Object(c["resolveComponent"])("MyClient"),r=Object(c["resolveComponent"])("AdminFrame");return Object(c["openBlock"])(),Object(c["createBlock"])(r,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l)]})),_:1})}var a=function(e){return Object(c["pushScopeId"])("data-v-c915bc5e"),e=e(),Object(c["popScopeId"])(),e},i={class:"settings-index-page"},l=a((function(){return Object(c["createElementVNode"])("h1",null,"应用程序",-1)}));function r(e,t,n,o,a,r){var d=Object(c["resolveComponent"])("MyToolbar"),u=Object(c["resolveComponent"])("MySearch"),s=Object(c["resolveComponent"])("MyPager"),b=Object(c["resolveComponent"])("MyTable"),p=Object(c["resolveComponent"])("MyEdit");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",i,[l,Object(c["createVNode"])(d,{onAction:r.handleAction},null,8,["onAction"]),Object(c["createVNode"])(u,{class:"search-box"}),Object(c["createVNode"])(s,{class:"pager-box"}),Object(c["createVNode"])(b,{onAction:r.handleAction},null,8,["onAction"]),Object(c["createVNode"])(p,{method:"POST",enabled:a.theAddEnabled,"onUpdate:enabled":t[0]||(t[0]=function(e){return a.theAddEnabled=e}),item:a.theAddItem,"onUpdate:item":t[1]||(t[1]=function(e){return a.theAddItem=e})},null,8,["enabled","item"]),Object(c["createVNode"])(p,{method:"PUT",enabled:a.theEditEnabled,"onUpdate:enabled":t[2]||(t[2]=function(e){return a.theEditEnabled=e}),item:a.theEditItem,"onUpdate:item":t[3]||(t[3]=function(e){return a.theEditItem=e})},null,8,["enabled","item"])])}n("b0c0");var d=["src"],u={class:"operation-buttons"};function s(e,t,n,o,a,i){var l=Object(c["resolveComponent"])("el-table-column"),r=Object(c["resolveComponent"])("el-button"),s=Object(c["resolveComponent"])("el-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(s,{data:i.items},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{label:"",width:"48px"},{default:Object(c["withCtx"])((function(e){return[Object(c["createElementVNode"])("img",{class:"item-icon-img",src:e.row.icon},null,8,d)]})),_:1}),Object(c["createVNode"])(l,{label:"名称",prop:"name"}),Object(c["createVNode"])(l,{label:"标题",prop:"title"}),Object(c["createVNode"])(l,{label:"状态",prop:"state"}),Object(c["createVNode"])(l,{label:"操作"},{default:Object(c["withCtx"])((function(e){return[Object(c["createElementVNode"])("div",u,[Object(c["createVNode"])(r,{type:"primary",link:"",onClick:function(t){return i.handleClickItemDetail(e.row)}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("详情")]})),_:2},1032,["onClick"]),Object(c["createVNode"])(r,{type:"primary",link:"",onClick:function(t){return i.handleClickEditItem(e.row)}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("编辑")]})),_:2},1032,["onClick"]),Object(c["createVNode"])(r,{type:"danger",link:"",onClick:function(t){return i.handleClickRemoveItem(e.row)}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("移除")]})),_:2},1032,["onClick"])])]})),_:1})]})),_:1},8,["data"])])}var b=n("c9a1"),p={name:"settings-executables-table",computed:{items:function(){return this.$store.getters["executable/currentPageItems"]}},methods:{handleClickRemoveItem:function(e){var t=this,n="移除应用程序",c="确定要移除 ["+e.name+"] 这个应用程序吗？",o="该操作不会把磁盘上安装的程序卸载或删除，仅将对它的引用从WPM数据库中移除。";b["a"].confirm(c+o,n,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.removeItem(e)})).catch((function(){}))},handleClickEditItem:function(e){var t="edit",n={name:t,item:e};this.$emit("action",n)},handleClickItemDetail:function(e){var t="detail",n={name:t,item:e};this.$emit("action",n)},removeItem:function(e){var t=e.id;this.$store.dispatch("executable/remove",t)}}},h=(n("7a4e"),n("6b0d")),m=n.n(h);const f=m()(p,[["render",s],["__scopeId","data-v-58bab15c"]]);var O=f;function j(e,t,n,o,a,i){var l=Object(c["resolveComponent"])("el-pagination");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(l,{"current-page":a.currentPage,"onUpdate:currentPage":t[0]||(t[0]=function(e){return a.currentPage=e}),"page-size":a.pageSize,"onUpdate:pageSize":t[1]||(t[1]=function(e){return a.pageSize=e}),"page-sizes":[5,10,20,50,100,200,500],background:a.background,layout:"total, sizes, prev, pager, next",total:i.theCountItemsTotal,onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["current-page","page-size","background","total","onSizeChange","onCurrentChange"])])}var C={name:"settings-executables-pager",computed:{items:function(){return[]},theCountItemsTotal:function(){return this.$store.getters["executable/total"]}},data:function(){return{currentPage:1,pageSize:10,background:!1}},methods:{handleSizeChange:function(e){var t=e;this.$store.commit("executable/update",{size:t})},handleCurrentChange:function(e){var t=e-1;this.$store.commit("executable/update",{index:t})},init:function(){var e={index:this.currentPage-1,size:this.pageSize,filter:""};this.$store.commit("executable/update",e)}},mounted:function(){this.init()}};const v=m()(C,[["render",j]]);var V=v,x=n("f6f2"),g={name:"settings-executables-table",computed:{},data:function(){return{searchtext:""}},methods:{applyFilter:function(e){this.searchtext=e,this.$store.commit("executable/update",{filter:e})}}},k=Object.assign(g,{setup:function(e){return function(e,t){var n=Object(c["resolveComponent"])("el-icon"),o=Object(c["resolveComponent"])("el-button"),a=Object(c["resolveComponent"])("el-input");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(a,{modelValue:e.searchtext,onInput:e.applyFilter,clearable:"",placeholder:"请输入要查找的内容"},{append:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{title:"查找"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(x["m"]))]})),_:1})]})),_:1})]})),_:1},8,["modelValue","onInput"])])}}});const N=k;var w=N,y={class:"toolbar"},_={name:"settings-local-repositories-toolbar",data:function(){return{}},methods:{fetch:function(){this.$store.dispatch("executable/fetch",{})},handleClickAdd:function(){var e={name:"add"};this.$emit("action",e)},handleClickRefresh:function(){this.fetch()}},mounted:function(){this.fetch()}},E=Object.assign(_,{setup:function(e){return function(e,t){var n=Object(c["resolveComponent"])("el-icon"),o=Object(c["resolveComponent"])("el-button");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",y,[Object(c["createVNode"])(o,{onClick:e.handleClickRefresh,title:"刷新"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(x["k"]))]})),_:1})]})),_:1},8,["onClick"]),Object(c["createVNode"])(o,{onClick:e.handleClickAdd,title:"添加本地仓库"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(x["j"]))]})),_:1})]})),_:1},8,["onClick"])])}}});n("d713");const I=m()(E,[["__scopeId","data-v-1d69e6dd"]]);var B=I;n("a4d3"),n("e01a");function T(e,t,n,o,a,i){var l=Object(c["resolveComponent"])("el-option"),r=Object(c["resolveComponent"])("el-select");return Object(c["openBlock"])(),Object(c["createBlock"])(r,null,{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.options,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:e.id,value:e.value,label:e.text},null,8,["value","label"])})),128)),Object(c["createVNode"])(l,{value:0,label:"不使用"})]})),_:1})}var A={name:"open-with-priority-selector",data:function(){for(var e=6,t=[],n=1;n<=e;n++){var c={id:n,value:e+2-n,text:""+n};t.push(c)}return{options:t}}};const F=m()(A,[["render",T]]);var M=F,P=n("2af2"),S={class:"tip-bad-path"},D={name:"settings-executables-item-add",components:{OpenWithPrioritySel:M,OpenFileDialog:P["a"]},computed:{isModeAdd:function(){var e=(this.method+"").toUpperCase();return"POST"==e},isModeEdit:function(){var e=(this.method+"").toUpperCase();return"PUT"==e},theDialogTitle:function(){return this.isModeAdd?"添加应用":"修改应用"}},data:function(){return{item1:{id:0,name:"",title:"",path:"",description:""},displayDialog:!1,displayTipForBadPath:!1,displayOpenFileDialog:!1}},methods:{handleClickCancel:function(){this.displayDialog=!1},handleClickOK:function(){var e=this,t=this.item1,n="executable/";this.isModeAdd?n+="insert":this.isModeEdit&&(n+="update"),this.$store.dispatch(n,t).then((function(){e.displayDialog=!1}))},handleClickBrowse:function(){this.displayOpenFileDialog=!0},handleClickFind:function(){var e=this.item1.name;this.prepareInsert({name:e})},handleOpenExeFiles:function(e){if(null!=e){var t=null;for(var n in e){var c=e[n];t=c.path;break}if(null!=t){var o=this.item1;o.path=t,this.prepareInsert(o)}}},prepareInsert:function(e){var t=this;null!=e&&this.$store.dispatch("executable/prepareInsert",e).then((function(e){t.handleFindResult(e.data)}))},handleFindResult:function(e){var t=e.executables,n=t[0];if(n.ready&&n.size>0&&""!=n.sha256sum)return this.item1.name=n.name,this.item1.title=n.title,this.item1.path=n.path,void(this.displayTipForBadPath=!1);this.displayTipForBadPath=!0}},mounted:function(){},props:{enabled:Boolean,item:Object,method:String},watch:{displayDialog:function(e){this.$emit("update:enabled",e)},enabled:function(e){this.displayDialog=e},item:function(e){this.item1=e}}},U=Object.assign(D,{setup:function(e){return function(e,t){var n=Object(c["resolveComponent"])("el-icon"),o=Object(c["resolveComponent"])("el-button"),a=Object(c["resolveComponent"])("el-input"),i=Object(c["resolveComponent"])("el-form-item"),l=Object(c["resolveComponent"])("el-form"),r=Object(c["resolveComponent"])("el-dialog");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(r,{modelValue:e.displayDialog,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.displayDialog=t}),title:e.theDialogTitle},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{"label-width":"150px"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(i,{label:"名称"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{modelValue:e.item1.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.item1.name=t})},{append:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{class:"btn-find",onClick:e.handleClickFind},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(x["m"]))]})),_:1}),Object(c["createTextVNode"])(" 查找")]})),_:1},8,["onClick"])]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(i,{label:"路径"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{modelValue:e.item1.path,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.item1.path=t})},{append:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{onClick:e.handleClickBrowse},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(" 浏览... ")]})),_:1},8,["onClick"])]})),_:1},8,["modelValue"]),Object(c["withDirectives"])(Object(c["createElementVNode"])("div",S," 错误的路径！ ",512),[[c["vShow"],e.displayTipForBadPath]])]})),_:1}),Object(c["createVNode"])(i,{label:"标题"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{modelValue:e.item1.title,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.item1.title=t})},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(i,{label:"排列顺序"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(M,{modelValue:e.item1.open_with_priority,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.item1.open_with_priority=t})},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(i,{label:"说明"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{type:"textarea",modelValue:e.item1.description,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.item1.description=t})},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(o,{type:"success",onClick:e.handleClickOK},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("保存")]})),_:1},8,["onClick"]),Object(c["createVNode"])(o,{type:"default",onClick:e.handleClickCancel},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("取消")]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue","title"]),Object(c["createVNode"])(P["a"],{modelValue:e.displayOpenFileDialog,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.displayOpenFileDialog=t}),onOpenFile:e.handleOpenExeFiles},null,8,["modelValue","onOpenFile"])])}}});n("91e1");const z=m()(U,[["__scopeId","data-v-15ef9535"]]);var $=z,R={name:"settings-executables",components:{MyTable:O,MyPager:V,MySearch:w,MyToolbar:B,MyEdit:$},data:function(){return{theAddItem:{},theAddEnabled:!1,theEditItem:{},theEditEnabled:!1}},methods:{handleAction:function(e){var t=e.name;"edit"==t?this.edit(e.item):"add"==t&&this.add()},add:function(){this.theAddItem={},this.theAddEnabled=!0},edit:function(e){this.theEditItem=e,this.theEditEnabled=!0}}};n("cc85");const J=m()(R,[["render",r],["__scopeId","data-v-c915bc5e"]]);var K=J,W={name:"settings-executables",components:{MyClient:K}};const L=m()(W,[["render",o]]);t["default"]=L},"7a4e":function(e,t,n){"use strict";n("8aa2")},"7d2b":function(e,t,n){},"8aa2":function(e,t,n){},"91e1":function(e,t,n){"use strict";n("a77d")},a77d:function(e,t,n){},cc85:function(e,t,n){"use strict";n("7d2b")},d713:function(e,t,n){"use strict";n("446b")}}]);
//# sourceMappingURL=chunk-696ccc20.6d838c8f.js.map